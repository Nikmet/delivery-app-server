generator client {
    provider = "prisma-client"
    output   = "../src/generated/prisma"
}

datasource db {
    provider = "postgresql"
}

model User {
    id String @id @default(cuid())

    email    String @unique
    password String

    name       String @unique
    avatarPath String @default("/uploads/default-avatar.png") @map("avatar_path")
    phone      String @default("")

    orders Order[]

    favorites Product[]

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("user")
}

model Product {
    id String @id @default(cuid())

    name        String @unique
    slug        String @unique
    description String
    price       Int
    image       String

    category   Category? @relation(fields: [categoryId], references: [id])
    categoryId String?

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")
    user      User[]
    userId    String?

    @@map("product")
}

model Category {
    id String @id @default(cuid())

    name  String @unique
    slug  String @unique
    image String

    products Product[]

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("category")
}

model Order {
    id String @id @default(cuid())

    reference String @unique

    user   User?   @relation(fields: [userId], references: [id])
    userId String?

    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    @@map("order")
}
